(self.modernJsonp=self.modernJsonp||[]).push([[68394],{237666:(e,t,r)=>{"use strict";var n=r(667294),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useSyncExternalStore,o=n.useRef,u=n.useEffect,a=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,c){var d=o(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var m=s(e,(d=a(function(){function e(e){if(!u){if(u=!0,s=e,e=n(e),void 0!==c&&f.hasValue){var t=f.value;if(c(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var r=n(e);return void 0!==c&&c(t,r)?(s=e,t):(s=e,o=r)}var s,o,u=!1,a=void 0===r?null:r;return[function(){return e(t())},null===a?void 0:function(){return e(a())}]},[t,r,n,c]))[0],d[1]);return u(function(){f.hasValue=!0,f.value=m},[m]),l(m),m}},331103:(e,t,r)=>{"use strict";e.exports=r(237666)},623258:(e,t,r)=>{"use strict";r.d(t,{$A:()=>m,N0:()=>g,N3:()=>p,VK:()=>f,_J:()=>h,mW:()=>d});var n=r(667294),i=r(316886),s=r(992114),o=r(785893);let u={},a={},l=!1,c=(0,n.createContext)({setMetric:()=>void 0,getMetricForComponent:()=>void 0,getMetricsForPath:()=>void 0,setRmaData:()=>void 0});function d({children:e}){let t=(0,n.useCallback)((e,t,r)=>{u[e]||(u[e]={}),u[e][t]=r},[]),r=(0,n.useCallback)((e,t)=>u[e]?.[t],[]),s=(0,n.useCallback)(e=>u[e],[]),d=(0,n.useCallback)(({id:e,path:t,fragmentName:r,executionTime:n,newData:s})=>{if(l)return;let o=`${r}.${e}`;a[t]||(a[t]={}),a[t][o]||(a[t][o]={totalRenderTime:0,previousData:{},renderCount:0,resultUpdatedCount:0});let u=!(0,i.ZP)(s,a[t][o].previousData);a[t][o].totalRenderTime+=n,a[t][o].renderCount+=1,a[t][o].resultUpdatedCount+=+!!u,a[t][o].previousData=s},[]),f=(0,n.useMemo)(()=>({setMetric:t,getMetricForComponent:r,getMetricsForPath:s,setRmaData:d}),[t,r,s,d]);return(0,o.jsx)(c,{value:f,children:e})}function f(){return(0,n.use)(c)}function m(e){return u[e]}function p(e){return["www/index.js","www/homefeed.js"].includes(e)}function h(e){let t=a[e],r={};l=!0,t&&Object.keys(t).length&&p(e)&&Object.entries(t).forEach(([e,t])=>{let[n]=e.split(".");n&&!r[n]&&(r[n]=!0,(0,s.QX)(`render_stats.rma.${n}.renderCount`,t.renderCount,{sampleRate:1}),(0,s.QX)(`render_stats.rma.${n}.resultUpdatedCount`,t.resultUpdatedCount,{sampleRate:1}),(0,s.LY)(`render_stats.rma.${n}`,t.totalRenderTime,{sampleRate:1}))})}function g(){u={},a={},l=!1}},316886:(e,t,r)=>{"use strict";function n(e,t,r){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(!s(e[n],t[n],r+1))return!1;return!0}function i(e,t,r){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!(n in t)||!s(e[n],t[n],r+1))return!1;return!0}function s(e,t,r){if(r>=1e3)return!1;if(e===t)return!0;if(null==e||null==t||"object"!=typeof e&&"object"!=typeof t)return e!=e&&t!=t;let s=Object.prototype.toString.call(e);if(s!==Object.prototype.toString.call(t))return!1;switch(s){case"[object Array]":return n(e,t,r);case"[object Set]":return n(Array.from(e).sort(),Array.from(t).sort(),r);case"[object Object]":case"[object Arguments]":return i(e,t,r);case"[object Map]":return i(Object.fromEntries(e),Object.fromEntries(t),r);case"[object RegExp]":return e+""==t+"";case"[object Error]":return e.name===t.name&&e.message===t.message;default:return!1}}function o(e,t){return s(e,t,0)}r.d(t,{Z1:()=>i,ZP:()=>o,qP:()=>n})},756064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(667294),i=r(295666),s=r(992114);function o(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends n.Component{constructor(...e){super(...e),o(this,"state",{error:null,info:null}),o(this,"resetError",()=>{this.setState({error:null,info:null})})}componentDidCatch(e,t){try{let{name:t}=this.props,r=this.props.type||"secondary";(0,i.T)({extraData:e.extraData??{},errorBoundary:t,errorBoundaryType:r,message:e.message,name:e.name,stack:e.stack}),(0,s.nP)("react.error_boundary",{sampleRate:.1,tags:{component:void 0,name:this.props.name}})}catch(e){(0,s.nP)("react.error_boundary.error",{sampleRate:1,tags:{name:this.props.name}})}this.setState({error:e,info:t})}render(){let{renderErrorState:e}=this.props,{error:t,info:r}=this.state;return t&&r?e?e({error:t,info:r,resetError:this.resetError}):null:this.props.children}}},56063:(e,t,r)=>{"use strict";r.d(t,{$H:()=>u,$q:()=>w,$u:()=>i,Az:()=>d,Cw:()=>S,D6:()=>c,GZ:()=>C,KN:()=>E,Ke:()=>b,Lo:()=>s,P2:()=>g,TS:()=>L,Wv:()=>_,ZZ:()=>m,g5:()=>p,jC:()=>a,lX:()=>h,oX:()=>v,qG:()=>y,tG:()=>o,yF:()=>n,yc:()=>f,yt:()=>l});let n=236,i=270,s=157.33333333333334,o=175,u=24,a=4,l=8,c=2,d=8,f=2,m=14,p=16,h=16,g=24,v=16,y=-1,b=2,w=(e=!1,t=!1)=>e?t?h:12:g,_=({defaultItemWidth:e,contentVisibleItemCount:t,gap:r,moduleWidth:n})=>t||n?(n-((Math.ceil(t)+1)*r+8))/t:e,E=(e,t,r,n,i=m)=>{let s=e+i;return`
@media (min-width: ${t*s}px) and (max-width: ${(r+1)*s-1}px) {
  ${n}
}
`},L=(e,t,r)=>{let i=r?3:2,s=t?5:i,u=t?n:o,a=t?v:l,c=u*s+a*s-(t||!t&&r?12:6);if(!e)return c;for(let t=s;t>=2;t-=1)if(e>c)break;else c=u*t+a*t;return c},C=e=>{let t=Object.values(e.videos?.video_list??{}).find(e=>"number"==typeof e.width&&"number"==typeof e.height);return t?{width:t.width,height:t.height}:{width:0,height:0}},S=e=>!!(e&&"is_premiere"in e&&e.is_premiere&&"videos"in e&&e.videos)},221097:(e,t,r)=>{"use strict";function n(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:()=>o});let i=new class{constructor(){n(this,"onResumeListeners",[]),n(this,"onPauseListeners",[]),n(this,"inExp",!1),n(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter(t=>t!==e)}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter(t=>t!==e)}},s=e=>{if(e.isHidden){let{reason:t}=e;i.windowInFocus=!1,i.onPauseListeners.forEach(e=>e(t))}else i.windowInFocus=!0,i.onResumeListeners.forEach(e=>e())};setTimeout(()=>{window.addEventListener("beforeunload",()=>s({isHidden:!0,reason:"beforeunload"})),window.addEventListener("focus",()=>s({isHidden:!1})),window.addEventListener("blur",()=>s({isHidden:!0,reason:"blur"})),window.addEventListener("pageshow",()=>s({isHidden:!1})),window.addEventListener("pagehide",()=>s({isHidden:!0,reason:"pagehide"})),void 0!==document.hidden?document.addEventListener("visibilitychange",()=>s(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",()=>s(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1)},0);let o=i},849289:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});let n=(0,r(667294).createContext)(null)},298568:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,S:()=>n});let{Provider:n,getMaybe:i}=(0,r(218291).Z)("pwtSurfaceContext")},762422:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(300509),i=r(667294),s=r(17433),o=r(298568),u=r(657742),a=r(647466);function l({children:e,isAtEndOfFeed:t,pinData:r,itemCount:l,includeBackgroundImages:c=!1,includeVideos:d=!1,includeSections:f=!1,isPlaceholderGrid:m,stopwatchSetVisuallyCompleteResult:p,stopwatchContext:h}){let{isAuthenticated:g}=(0,a.bC)(),v=(0,u.Z)()?.isAuthenticated||g;v||(f=!0),(0,n.Z)({pinData:r,isAtEndOfFeed:t,includeBackgroundImages:c,includeVideos:d,includeSections:f,isPlaceholderGrid:m,stopwatchSetVisuallyCompleteResult:p,isAuth:v,stopwatchContext:h});let y=(0,o.A)(),b=(0,i.useRef)(null);return(0,i.useEffect)(()=>{l!==b.current&&(b.current=l,y&&(0,s.ZP)(s.at))},[!!y,l]),e}},482535:(e,t,r)=>{"use strict";r.d(t,{F9:()=>f,LM:()=>l,VZ:()=>s,cQ:()=>m,rZ:()=>o});var n=r(719413),i=r(535768);let s=()=>"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll,o=e=>e instanceof HTMLDivElement||e instanceof HTMLVideoElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null,u=({top:e,height:t},{foldY:r,pageYOffset:n})=>{let i=e+n;if(i>=r)return!1;let s=Math.min(t,r-i);return s>.5*t||s>.2*r},a=e=>{if(e instanceof HTMLImageElement)return e.src;if(e instanceof HTMLVideoElement)return e.attributes.poster.value;let t=((e.style||{}).backgroundImage||"").match(/^url\(["'](.*)["']\)$/);return t&&t[1]||null},l=()=>document.querySelector?document.querySelectorAll(n.wc).length:((0,i.H)("missing_document_query_selector"),0),c=()=>{if(!document.querySelector)return(0,i.H)("missing_document_query_selector"),null;let e=document.querySelectorAll(n.wc);return e[e.length-1]||null},d=(e,t)=>{let r=o(e);if(!r)return(0,i.H)("missing_client_rect"),!1;if(r.width<70&&r.height<70){if(e instanceof HTMLImageElement)return!1;let t=a(e);if(t?.endsWith("svg"))return!1}return u(r,t)},f=()=>{let e=c();if(!e)return!1;let t=window.innerHeight||0,r=window.pageYOffset||0;return e.getBoundingClientRect().top+r>=t},m=(e,t,r)=>{if(!document.querySelector)return(0,i.H)("missing_document_query_selector"),[];let s={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},o=[n.Wf,...e?[n.fF]:[],...t?[n.$N]:[]].join(","),u=[...document.querySelectorAll(o)];if(r){let e=[...document.querySelectorAll('div[data-test-id="board-section"]')],t=e=>{let r=[...e.children];!r.length&&e.style.backgroundImage?u.push(e):r.length&&r.forEach(e=>{t(e)})};e.forEach(e=>{t(e)})}return u.reduce((e,r)=>{if((r instanceof HTMLImageElement||r instanceof HTMLDivElement||r instanceof HTMLVideoElement&&t)&&d(r,s)){let t=a(r);if(t){let n=(t||"").replace(/.*\//,"");return e.concat([{element:r,fileName:n}])}}return e},[])}},719413:(e,t,r)=>{"use strict";r.d(t,{$N:()=>a,Kb:()=>n,Wf:()=>o,fF:()=>u,wc:()=>s});let n="pwt-grid-item",i=['div[data-grid-item="true"]',"div.Grid__Item",`div[data-test-id="${n}"]`],s=i.join(","),o=i.map(e=>`${e} img`).join(","),u=i.map(e=>`${e} div[style*=background-image]`).join(","),a=i.map(e=>`${e} video`).join(",")},300509:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_,v:()=>g});var n=r(667294),i=r(967312),s=r(582082),o=r(150739),u=r(482535),a=r(535768),l=r(17433),c=r(298568),d=r(331118),f=r(116657),m=r(481714),p=r(992114);let h=(0,o.XV)("GridProfiler"),g=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,u.VZ)(),v=e=>"LAYOUT"===e.status&&500||"TIMING"===e.status&&100||null,y=(e,t)=>{if(!t){let t=(0,u.LM)();if(t===e)return h("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,u.F9)())return h("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}},b=(e,t)=>{let r=0,n=0,i=0,s=0,o=0;return e=e.filter(e=>"pin"===e.type),t.forEach((t,u)=>{let a,l=t.fileName.split(".")[0];a=e[u],l!==a?.image_signature&&(a=e.find(e=>l===e?.image_signature)),void 0===a?o+=1:a.is_promoted||a.recommendation_reason?.reason==="PROMOTED_PIN"||a?.promoter?.length?i+=1:null!==a.story_pin_data_id&&void 0!==a.story_pin_data_id?r+=1:a?.videos?.video_list?n+=1:s+=1}),{storyPinCount:r,videoCount:n,adCount:i,imageCount:s,unknownCount:o}},w=(e,t)=>{let r=()=>{window.removeEventListener(e,r),t()};return window.addEventListener(e,r),()=>window.removeEventListener(e,r)};function _({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:r,includeVideos:g=!1,includeSections:_,isPlaceholderGrid:E,stopwatchSetVisuallyCompleteResult:L,stopwatchContext:C,isAuth:S}){let j=(0,c.A)(),A=j?.getId()||(0,f.P9)(),T=j?.setVisuallyCompleteResult,O=({imageTimings:e})=>{L&&L(),T&&T({imageTimings:e}),(0,f.cB)(e)},[I,H]=(0,n.useState)({status:"DISABLED"}),k=(0,i.F)();(0,n.useEffect)(()=>{H({status:"LAYOUT",failedCount:0,numOfItemsChecked:0})},[A]),(0,n.useEffect)(()=>{if(h("new status",I),"LAYOUT"===I.status){let e=w("scroll",()=>{(0,l.ZP)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[I.status]),(0,m.Z)(()=>{let n="unknown",i="unknown",l=()=>{},c=e=>{j?j.abort(e):C?.abort()};if(j){let{getMetricId:e}=j,t=e();i=t.surface,n=(0,s.KJ)(t),l=j.addBinaryAnnotation}else i="stopwatch",n=`${i}_${C?.name}`,C?.addBinaryAnnotation&&(l=C?.addBinaryAnnotation);let m=(0,u.cQ)(r,g,_);if(E)return void h("bypassing PWT run due to skeleton pin grid");switch(I.status){case"LAYOUT":{let t=y(I.numOfItemsChecked,e);t.complete?H({status:"TIMING",failedCount:0,pinElements:m}):500*I.failedCount>6e4?((0,a.A9)(`images.${n}.visuallyComplete.maxLayoutAttempt`),c("visuallyComplete_layoutTimeout"),(0,f.JG)("visuallyComplete_layoutTimeout"),H({status:"DISABLED"})):H({...I,failedCount:I.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{let e=(0,d.Cg)(),r=I.pinElements.length,s=[],u=0,m=0,g=0,v=1/0,y=0;if(I.pinElements.forEach(({element:t,fileName:r})=>{let n=e.find(e=>e.name.endsWith(r));n?n.responseEnd?(s.push(n),(0,o.v5)(t,"green"),"search"===i&&(v=Math.min(v,n.requestStart),y=Math.max(y,n.responseEnd))):(g+=1,(0,o.v5)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(m+=1,(0,o.v5)(t,"red")):(u+=1,(0,o.v5)(t,"greenyellow"))}),u||g)100*I.failedCount>6e4?((0,a.A9)(`images.${n}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:r,incompleteCount:u,noTimingCount:m,noTimingResponseEndCount:g}}),c("visuallyComplete_timingTimeout"),(0,f.JG)("visuallyComplete_timingTimeout"),H({status:"DISABLED"})):H({...I,failedCount:I.failedCount+1});else{if(h(`All ${s.length} images are fetched`),t&&t.length){let e=b(t,I.pinElements);if(Object.entries(e).forEach(([e,t])=>{l(e,t,"I16"),(0,f.XJ)(e,t,"I16")}),(0,a.A9)(`${n}.pinTypes`,{tags:e}),"search"===i){let e=y-v;t[0].display_options?.num_columns_requested===0?(0,p.LY)("full_width_story_image_fetch_time_true",e,{sampleRate:1}):(0,p.LY)("full_width_story_image_fetch_time_false",e,{sampleRate:.05})}}if(S&&"search"===i){let{group:e}=k.checkExperiment("dweb_grid_loading_state");e&&(0,p.S0)("webapp.gridVisuallyComplete.loadingState",r,{sampleRate:1,tags:{group:e}})}O({imageTimings:s}),H({status:"DISABLED"}),(0,a.A9)(`images.${n}.visuallyComplete.complete`,{tags:{totalImageCount:r,noTimingCount:m}})}}}},v(I))}},657742:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(667294),i=r(849289);function s(){return(0,n.useContext)(i.Z)}},481714:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(667294);let i=(e,t)=>{let r=(0,n.useRef)(()=>{});(0,n.useEffect)(()=>{r.current=e},[e]),(0,n.useEffect)(()=>{if(null===t)return()=>{};let e=setInterval(()=>r.current(),t);return()=>clearInterval(e)},[t])}},276162:(e,t,r)=>{"use strict";function n(){return{}}r.d(t,{kr:()=>n}),r.g.__AsyncLocalStorage__&&new r.g.__AsyncLocalStorage__},693967:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=s(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=s(t,r));return t}(r)))}return e}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(r=(function(){return i}).apply(t,[]))||(e.exports=r)}()}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/68394-64cc4b8c20b24f40.mjs.map