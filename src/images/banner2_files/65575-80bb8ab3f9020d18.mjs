"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[65575,76183],{30694:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(691772),a=i(992114);function r(e,t,i,r,s){let o=new URLSearchParams,p=t.reduce((e,t)=>{if(null!=t){let i=function(e){let t;try{t=decodeURIComponent(e)}catch(i){t=e}t.startsWith("http")?t.startsWith("http://")&&(t=t.replace("http://","https://")):t="https://"+t;try{return new URL(t).origin}catch(n){let i=t.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(i&&i.length>1)return i[1];return e}}(t);return e.add(i)}return e},new Set);o.append(n.NR.SOURCE_EVENT_ID,e??"0"),o.append(n.NR.DESTINATION,JSON.stringify([...p])),o.append(n.NR.EXPIRY,i?n.uV:n.ug),o.append(n.NR.PRIORITY,i?n.NR.CLICK_PRIORITY:n.NR.VIEW_PRIORITY),s&&o.append(n.NR.ADVERTISER_ID,s),r&&o.append(n.NR.CAMPAIGN_ID,r),o.append(n.NR.SOURCE_EVENT_TYPE,i?n.bC:n.Cu);try{let{hostname:e}=new URL(window.location.href);"www.pinterest.com"!==e&&o.append(n.NR.HOSTNAME,e)}catch(e){(0,a.nP)("webapp.arapi.generateARASourceEventURL",{sampleRate:.1,tags:{status:"failed",href:window&&window.location&&window.location.href}})}return"https://www.pinterest.com/attribution_source/?"+o.toString()}},576183:(e,t,i)=>{i.d(t,{G6:()=>r,i7:()=>s,oi:()=>n,u$:()=>a,un:()=>p,vU:()=>o,w1:()=>d});let n=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),a=e=>e?e.includes("Chrome")?n.CHROME:e.includes("Safari")?n.SAFARI:e.includes("Firefox")?n.FIREFOX:e.includes("Opera")?n.OPERA:e.includes("IE")?n.IE:e.includes("Edge")?n.EDGE:n.OTHER:n.OTHER;function r(e){return a(e)===n.SAFARI}function s(e){return a(e)===n.CHROME}function o(e){return a(e)===n.FIREFOX}function p(e){return a(e)===n.EDGE}function d(e){return a(e)===n.IE}},586033:(e,t,i)=>{i.d(t,{F:()=>v,Z:()=>I});var n=i(667294),a=i(30694),r=i(18644),s=i(992114);async function o(e,t,i,n,o,p,d,l,m){let c,{appType:u,osType:g}=p||{},T="",w="";if(["Pin","pinImpressions"].includes(e)&&t&&(n||l||m)){(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:u,osType:g}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting"))return void(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:u,osType:g}});T=(0,a.Z)(i,[n,l,m],!1,o,d);try{w=new URL(window.location.href).hostname}catch(e){(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"hostname_parse_failed",href:window&&window.location&&window.location.href}})}if(w&&"www.pinterest.com"!==w)document.createElement("img").setAttribute("attributionsrc",T),(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"international",appType:u,osType:g,hostname:w}});else if(!(c=await window.fetch(T,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}})).ok)throw Error("server request failed.");(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:u,osType:g}})}catch(e){(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:(0,r.Z)(e,"name"),message:(0,r.Z)(e,"message"),appType:u,osType:g,hostname:w,responseStatus:c&&c.status}})}}else(0,s.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:u,osType:g}})}var p=i(576183),d=i(19963),l=i(824834),m=i(94970),c=i(174646),u=i(538645),g=i(422908),T=i(813509),w=i(438596);let y={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"curatedBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}};function I({carouselData:e,closeupImpressionType:t,closeupNavigationType:i,componentType:a,contextLogData:r,clientTrackingParams:I,duploShouldTrackPinEvents:v,elementType:P,impressionAuxFields:f,inImpressionExp:x,impressionType:S,impressionsFramework:D,isPaused:h,loggingId:E,objectIdStr:b,slotIndex:R,trackCarousel:_,viewData:A,viewParameter:k,viewType:N,isPromoted:F,storyPinProductEventData:C}){let{logContextEvent:O}=(0,d.v)(),{logMrcVideoAdEventOnPlay:L}=(0,g.H)(),{userAgent:{browserName:M}}=(0,c.B)(),{logStat:Z}=(0,T.Yg)(),H=D||m.Z,j=(0,n.useRef)(null),B=(0,n.useRef)(e=>{});B.current=n=>{let s=y[S],d=s.idType,l={clientTrackingParams:I,endTime:n.endTime,[d]:E,slotIndex:R,time:n.startTime,renderDuration:n.endTime-n.startTime,type:t,...f,forcedExit:"removed"===n.forcedExit?0:void 0};if("Pin"===S){let e=[],t=n.visibleEvents||new Map,i=n.hiddenEvents||new Map;if([1,50,80,2,102].forEach(n=>{t.has(n)&&e.push({type:n,time:1e6*(t.get(n)||0),visible:!0}),i.has(n)&&e.push({type:n,time:1e6*(i.get(n)||0),visible:!1})}),l={...l,pinCellWidth:n.pinCellWidth||0,pinCellHeight:n.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,t)=>e.time-t.time)},(0,p.i7)(M)&&f&&f.isPromoted){let{attributionSourceId:e,isPromoted:t,link:i,campaignId:n,araAuxData:a,advertiserId:r,domain:s,adDestinationUrl:p}=f;o(S,t??null,e??null,i??null,n??null,a??null,r??null,s??null,p??null)}}let m={component:a,object_id_str:b,view_type:N,view_data:A||{},view_parameter:k};if(_)e&&_&&O({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...l,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...m,aux_data:{...r}});else{let e={clientTrackingParams:I,event_type:s.eventType,...m,element:P,event_data:{[s.impressionType]:"Story"===S?l:[l],...C?{storyPinProductEventData:C}:{}},aux_data:{closeup_navigation_type:i,...r}};O(e),L(e)}v&&Z("log_pin_impression")};let{expName:U,group:V}=(0,l.Z)({skipActivation:!0}),W=(0,u.ZP)(),Y=(0,w.MM)(),{isAuthenticated:G}=(0,c.B)(),J=(0,n.useCallback)(()=>{let e=!1;try{let{current:t}=j;if(t instanceof HTMLElement&&(!F||t.getElementsByTagName("img").length>0)){let i=H.start(t);i.onExitViewport(B.current).setDebugId(E||"unknown"),v&&i.onEnterViewport(()=>{Z("log_pin_impression_track_enter_viewport")}),e=!0,V&&(0,s.nP)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:W,experimentName:U,group:V,handlerId:Y,isAuthenticated:G,slotIndex:R??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}v&&Z("log_pin_impression_track",{didStartTracking:e})},[j.current]);return(0,n.useEffect)(()=>(x&&!H.inExperiment&&H.setExperimentStatus(!0),h||J(),()=>{let{current:e}=j;e instanceof HTMLElement&&(!F||e.getElementsByTagName("img").length>0)&&H.stop(e)}),[h,J]),j}let v=({children:e,...t})=>e({impressionTrackerRef:I(t)})},422908:(e,t,i)=>{i.d(t,{H:()=>d,W:()=>l});var n=i(667294),a=i(19963),r=i(218291),s=i(967312),o=i(785893);let{Provider:p,get:d}=(0,r.Z)("VideoPlayer");function l({children:e}){let{logContextEvent:t,logImpression:i}=(0,a.v)(),{checkExperiment:r}=(0,s.F)(),[d,l]=(0,n.useState)(!1),[m,c]=(0,n.useState)([]),[u,g]=(0,n.useState)([]),[T,w]=(0,n.useState)({}),y=r("web_ads_mrc_video_impression").anyEnabled,I=e=>{w(t=>({...t,[e]:!0}))},v=(0,n.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:t}=e.event_data.pinImpressions[0],i=JSON.stringify(e.aux_data?.commerce_data||"").includes("story_pin_id");y&&(t||i)&&c(t=>[...t,e].slice(-1e3))}},[y]),P=(0,n.useCallback)(e=>{18===e.eventType&&y&&g(t=>[...t,e].slice(-1e3))},[y]),f=e=>{let{time:t}=e.event_data.pinImpressions[0];return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:t,renderDuration:0}]}}},x=e=>{if(e.eventData){let{time:t}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:t??0}}}return null};(0,n.useEffect)(()=>{let e=m.filter(e=>{let{pinIdStr:i}=e.event_data.pinImpressions[0];return!T[i]||!y||(t(f(e)),!1)});e.length!==m.length&&c(e)},[m,y,t,T]),(0,n.useEffect)(()=>{let e=u.filter(e=>{let t=e.eventData?.pinIdStr;if(!t)return!1;if(T[t]&&y){let t=x(e);return t&&i(t),!1}return!0});e.length!==u.length&&g(e)},[u,y,i,T]);let S=(0,n.useMemo)(()=>({captionsEnabled:d,logMrcVideoAdImpressionOnPlay:P,logMrcVideoAdEventOnPlay:v,setCaptionsEnabled:l,setVideoPlayed:I,videosPlayed:T}),[d,v,P,T]);return(0,o.jsx)(p,{value:S,children:e})}},765575:(e,t,i)=>{i.d(t,{Cy:()=>d,HE:()=>l,JE:()=>u,Mv:()=>r,Y4:()=>m,dL:()=>a,fS:()=>c,fv:()=>o,qS:()=>p,u:()=>g,uc:()=>s});var n=i(586033);let a=e=>{let t=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,duploShouldTrackPinEvents:e.duploShouldTrackPinEvents,loggingId:e.loggingId,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Pin",isPaused:e.isPaused,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},r=e=>{let t=(0,n.Z)({impressionAuxFields:{newsType:e.newsType,displayMode:e.displayMode,newsIndex:e.newsIndex||0,tapItemIdStr:e.tapItemIdStr},contextLogData:e.auxData||{},impressionType:"Notification",loggingId:e.notificationId,viewType:107,viewParameter:3082});return e.children({impressionTrackerRef:t})},s=e=>{let t=(0,n.Z)({impressionAuxFields:{newsType:e.newsType},contextLogData:e.auxData||{},impressionType:"NotificationFeed",loggingId:e.notificationId,viewType:107,viewParameter:3082});return e.children({impressionTrackerRef:t})},o=e=>{let t=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},contextLogData:e.auxData||{},componentType:e.component,isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,impressionType:"Article"});return e.children({impressionTrackerRef:t})},p=e=>{let t=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Story",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},d=e=>{let t=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0,contextLogData:e.auxData||{},componentType:e.component,impressionType:"User",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},l=e=>{let t=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Interest",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},m=e=>{let t=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"TodayArticle",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},c=e=>{let t=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Board",loggingId:e.loggingId,viewType:e.viewType||1,viewParameter:e.viewParameter,viewData:e.viewData});return e.children({impressionTrackerRef:t})},u=e=>{let t=(0,n.Z)({carouselData:e.carouselData,impressionType:"Pin",loggingId:e.loggingId,slotIndex:e.slotIndex??0,trackCarousel:!0,viewParameter:e.viewParameter||72,viewType:e.viewType||1,isPaused:e.isPaused,contextLogData:e.contextLogData,componentType:e.component,impressionAuxFields:e.impressionAuxFields});return e.children({impressionTrackerRef:t})},g=e=>{let t=(0,n.Z)({impressionAuxFields:{...e.impressionData||{}},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"EditorialBoard",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/65575-80bb8ab3f9020d18.mjs.map